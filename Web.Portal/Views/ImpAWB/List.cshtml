
@{
    Layout = null;
    int PageCurrent = (int)ViewBag.PageCurrent;

}
<div class='col-md-2 col-xs-12 margin-top-10'>
    <label class='control-label'><b>Tổng số: @ViewBag.TotalRecord</b></label>
</div>
<div class='col-md-10 col-xs-12 margin-top-10 text-right'>
    <label class='control-label'><b>Muốn xem chi tiết thông tin click vào biểu tượng dấu +</b></label>
</div>
<div class='col-md-12 col-xs-12 margin-top-10 text-right'>
    <label class='control-label'><b>Muốn xem chi tiết HAWB click vào biểu tượng bất kỳ thông số nào trong dòng thông tin</b></label>
</div>
<table class="table table-striped table-bordered table-advance table-hover dt-responsive" id="tbl-impawb">
    <thead>
        <tr>
            <th class="all" style="width:3%"></th>
            <th style="width:15%">
                MAWB
            </th>
            <th style="width:5%">
                HAWB
            </th>
            <th style="width:10%">
                ORIGIN-DEST
             </th>
            <th style="width:10%">
                FLIGHT-DATE
            </th>
            <th style="width:10%">
                GOODS NAME
            </th>
            <th style="width:30%">
                CONSIGNEE:
            </th>
            <th style="width:30%">
                CONSIGN ADDR:
            </th>
            <th style="width:15%">
                AGENT
            </th>
            <th style="width:30%">
                SHIPPER
            </th>
            <th style="width:35%">
                SHIPPER ADDR
            </th>
           
            <th>
                DATE IN:
            </th>
            <th>
                DATE OUT:
            </th>
            <th style="width:15%">
                PCS BILL:
            </th>
            <th style="width:15%">
                GW BILL:
            </th>
            <th style="width:15%">
                PCS GOODS:
            </th>
            <th style="width:15%">
                GW GOODS:
            </th>
            <th style="width:15%">
                PCS DELIVERY:
            </th>
        </tr>
    </thead>
    <tbody>
        @foreach (var row in (IList<Web.Portal.Layer.ImpAWB>)ViewData["impAWBLists"])
        {
            PageCurrent += 1;

            <tr>
                <td>@PageCurrent</td>

                <td><a href="#"
                        data-fl="@Html.DisplayTextFor(model => row.FlightNo)/@Html.Raw(row.FlightDate.HasValue && row.FlightDate.Value != DateTime.MinValue ? row.FlightDate.Value.ToString("dd/MM/yyyy") : string.Empty)"
                        data-awb="@Html.DisplayTextFor(model => row.Prefix) - @Html.Raw(row.Prefix+row.AWB)"
                        data-ori="@Html.DisplayTextFor(model => row.ORGIN) - @Html.DisplayTextFor(model => row.DEST)"
                        data-id="@Html.Raw(row.Prefix+row.AWB)" class="edit-hawb  ">@Html.DisplayTextFor(model => row.Prefix) - @Html.Raw(row.Prefix+row.AWB)</a></td>
                <td>
                    <a href="#"
                       data-fl="@Html.DisplayTextFor(model => row.FlightNo)/@Html.Raw(row.FlightDate.HasValue && row.FlightDate.Value != DateTime.MinValue ? row.FlightDate.Value.ToString("dd/MM/yyyy") : string.Empty)"
                       data-awb="@Html.DisplayTextFor(model => row.Prefix) - @Html.Raw(row.Prefix+row.AWB)"
                       data-ori="@Html.DisplayTextFor(model => row.ORGIN) - @Html.DisplayTextFor(model => row.DEST)"
                       data-id="@Html.Raw(row.Prefix+row.AWB)" class="edit-hawb  "><button class="btn btn-warning" type="button"><i class="fa fa-search"></i></button></a>
                </td>
                <td><a href="#"   data-fl="@Html.DisplayTextFor(model => row.FlightNo)/@Html.Raw(row.FlightDate.HasValue && row.FlightDate.Value != DateTime.MinValue ? row.FlightDate.Value.ToString("dd/MM/yyyy") : string.Empty)"
                        data-awb="@Html.DisplayTextFor(model => row.Prefix) - @Html.Raw(row.Prefix+row.AWB)"
                        data-ori="@Html.DisplayTextFor(model => row.ORGIN) - @Html.DisplayTextFor(model => row.DEST)"
                        data-id="@Html.Raw(row.Prefix+row.AWB)" class="edit-hawb  ">@Html.DisplayTextFor(model => row.ORGIN) - @Html.DisplayTextFor(model => row.DEST)</a></td>
                <td><a href="#"   data-fl="@Html.DisplayTextFor(model => row.FlightNo)/@Html.Raw(row.FlightDate.HasValue && row.FlightDate.Value != DateTime.MinValue ? row.FlightDate.Value.ToString("dd/MM/yyyy") : string.Empty)"
                        data-awb="@Html.DisplayTextFor(model => row.Prefix) - @Html.Raw(row.Prefix+row.AWB)"
                        data-ori="@Html.DisplayTextFor(model => row.ORGIN) - @Html.DisplayTextFor(model => row.DEST)"
                        data-id="@Html.Raw(row.Prefix+row.AWB)"class="edit-hawb  ">@Html.DisplayTextFor(model => row.FlightNo)/@Html.Raw(row.FlightDate.HasValue && row.FlightDate.Value != DateTime.MinValue ? row.FlightDate.Value.ToString("dd/MM/yyyy") : string.Empty)</a></td>              
                <td>
                    <a href="#" data-fl="@Html.DisplayTextFor(model => row.FlightNo)/@Html.Raw(row.FlightDate.HasValue && row.FlightDate.Value != DateTime.MinValue ? row.FlightDate.Value.ToString("dd/MM/yyyy") : string.Empty)"
                       data-awb="@Html.DisplayTextFor(model => row.Prefix) - @Html.Raw(row.Prefix+row.AWB)"
                       data-ori="@Html.DisplayTextFor(model => row.ORGIN) - @Html.DisplayTextFor(model => row.DEST)"
                       data-id="@Html.Raw(row.Prefix+row.AWB)" class="edit-hawb  ">@Html.DisplayTextFor(model => row.GoodsContent)</a>
                </td>    
                <td><a href="#" data-id="@Html.Raw(row.Prefix+row.AWB)" class="edit-hawb  ">@Html.DisplayTextFor(model => row.Consignee)</a></td>
                <td><a href="#" data-id="@Html.Raw(row.Prefix+row.AWB)" class="edit-hawb  ">@Html.DisplayTextFor(model => row.ConsignADDR)</a></td>          
                <td><a href="#"   data-fl="@Html.DisplayTextFor(model => row.FlightNo)/@Html.Raw(row.FlightDate.HasValue && row.FlightDate.Value != DateTime.MinValue ? row.FlightDate.Value.ToString("dd/MM/yyyy") : string.Empty)"
                        data-awb="@Html.DisplayTextFor(model => row.Prefix) - @Html.Raw(row.Prefix+row.AWB)"
                        data-ori="@Html.DisplayTextFor(model => row.ORGIN) - @Html.DisplayTextFor(model => row.DEST)"
                        data-id="@Html.Raw(row.Prefix+row.AWB)" class="edit-hawb  ">@Html.DisplayTextFor(model => row.Agent)</a></td>               
                <td><a href="#"   data-fl="@Html.DisplayTextFor(model => row.FlightNo)/@Html.Raw(row.FlightDate.HasValue && row.FlightDate.Value != DateTime.MinValue ? row.FlightDate.Value.ToString("dd/MM/yyyy") : string.Empty)"
                        data-awb="@Html.DisplayTextFor(model => row.Prefix) - @Html.Raw(row.Prefix+row.AWB)"
                        data-ori="@Html.DisplayTextFor(model => row.ORGIN) - @Html.DisplayTextFor(model => row.DEST)"
                        data-id="@Html.Raw(row.Prefix+row.AWB)" class="edit-hawb  ">@Html.DisplayTextFor(model => row.Shipper)</a></td>
                <td><a href="#"   data-fl="@Html.DisplayTextFor(model => row.FlightNo)/@Html.Raw(row.FlightDate.HasValue && row.FlightDate.Value != DateTime.MinValue ? row.FlightDate.Value.ToString("dd/MM/yyyy") : string.Empty)"
                        data-awb="@Html.DisplayTextFor(model => row.Prefix) - @Html.Raw(row.Prefix+row.AWB)"
                        data-ori="@Html.DisplayTextFor(model => row.ORGIN) - @Html.DisplayTextFor(model => row.DEST)"
                        data-id="@Html.Raw(row.Prefix+row.AWB)" class="edit-hawb  ">@Html.DisplayTextFor(model => row.ShipperADDR)</a></td>
                
                <td><a href="#" data-id="@Html.Raw(row.Prefix+row.AWB)" class="edit-hawb  ">@Html.Raw(row.FlightDate.HasValue && row.FlightDate.Value != DateTime.MinValue ? row.FlightDate.Value.ToString("dd/MM/yyyy")+ " "+row.ATATIME : string.Empty)</a></td>              
                <td><a href="#" data-id="@Html.Raw(row.Prefix+row.AWB)" class="edit-hawb  ">@Html.Raw(row.DateOut.HasValue && row.DateOut.Value != DateTime.MinValue ? row.DateOut.Value.ToString("dd/MM/yyyy HH:mm") : string.Empty)</a></td>              
                <td><a href="#" data-id="@Html.Raw(row.Prefix+row.AWB)" class="edit-hawb  ">@Html.DisplayTextFor(model => row.QuantityExpected)</a></td>
                <td><a href="#" data-id="@Html.Raw(row.Prefix+row.AWB)" class="edit-hawb  ">@Html.DisplayTextFor(model => row.WeightExpected)</a></td>
                <td><a href="#" data-id="@Html.Raw(row.Prefix+row.AWB)" class="edit-hawb  ">@Html.DisplayTextFor(model => row.QuantityReceived)</a></td>
                <td><a href="#" data-id="@Html.Raw(row.Prefix+row.AWB)" class="edit-hawb  ">@Html.DisplayTextFor(model => row.WeightReceived)</a></td>
                <td><a href="#" data-id="@Html.Raw(row.Prefix+row.AWB)" class="edit-hawb  ">@Html.DisplayTextFor(model => row.QuantityDelivered)</a></td>
            </tr>
        }
    </tbody>

</table>



<div class="box-footer clearfix">
    @Html.Raw(ViewBag.Paging)
</div>
<script>
    egovutil.loadPaging(pagingimpawb, "/impawb/list?cd=" + $("#cd").val()
                                                                    + "&fno=" + $("#fno").val()
                                                                    + "&fda=" + $("#fda").val()
                                                                    + "&tda=" + $("#tda").val() + "&hawb=" + $("#hawb").val()
                                                                    + "&ps=" + $("#pagingimpawb_step").val(), "#content-list-result");



    $("#pagingimpawb_step").change(function () {
        egovutil.getContent("#content-list-result",
                                                                "/impawb/list?cd=" + $("#cd").val()
                                                                    + "&fno=" + $("#fno").val()
                                                                    + "&fda=" + $("#fda").val()
                                                                    + "&tda=" + $("#tda").val() + "&hawb=" + $("#hawb").val()
                                                                    + "&ps=" + $(this).val());
    });

    egovutil.CreateTableSort("#tbl-impawb", [[0, "asc"]], [

    {

        "orderable": false, "targets": [0, 0]
    }
    ], false);
    $(".edit-hawb").click(function () {
        egovutil.dialog("HAWB DETAIL", "large", "/impawb/edithawb/" + $(this).attr("data-id") + "?fl="
                                            + $(this).attr("data-fl")
                                            + "&awb=" + $(this).attr("data-awb")
                                            + "&ori=" + $(this).attr("data-ori"), "");
    });
</script>